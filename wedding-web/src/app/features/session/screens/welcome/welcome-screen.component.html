<div
  class="page page--invite page--welcome page--entering"
  [class.page--leaving]="leaving"
  [class.page--entering-left]="enteringFromLeft"
>
  <div class="welcome-hero" aria-hidden="true"></div>

  <div class="page__content welcome-content">
    <div class="invite-card invite-card--welcome">
      <div class="welcome-curve" aria-hidden="true">
        <svg
          class="welcome-curve__svg"
          viewBox="0 0 520 140"
          preserveAspectRatio="xMidYMin meet"
          role="presentation"
          focusable="false"
        >
          <path id="welcomeArc" d="M 30 108 Q 260 10 490 108" fill="none" />
          <text class="welcome-curve__text">
            <textPath href="#welcomeArc" startOffset="50%" text-anchor="middle">
              Come for the love, stay for the party
            </textPath>
          </text>
        </svg>
      </div>

      <h1 class="invite-names invite-names--welcome" aria-label="Chelsea en Warre">
        <span class="welcome-nameScript">Chelsea</span>
        <span class="welcome-amp">&</span>
        <span class="welcome-nameScript">Warre</span>
      </h1>

      <p class="invite-body">
         <span *ngIf="config">Gelieve te antwoorden vóór <span class="invite-strong">{{ deadlineDateNl }}</span>.</span>
         <span *ngIf="!config">Gelieve te antwoorden vóór <span class="invite-strong">1 mei 2026</span>.</span>
      </p>

      <p class="welcome-weddingDate">zaterdag 6 juni 2026</p>

      <div class="welcome-locations">
        <a
          class="welcome-location welcome-location--link"
          href="https://www.google.com/maps/search/?api=1&query=Hertog%20Jan%20Plein%201%2C%203920%20Lommel"
          target="_blank"
          rel="noopener noreferrer"
        >
          <span class="welcome-pin" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="14" height="14" focusable="false" role="presentation">
              <path
                fill="currentColor"
                d="M12 2c3.87 0 7 3.13 7 7 0 5.25-7 13-7 13S5 14.25 5 9c0-3.87 3.13-7 7-7Zm0 9.5A2.5 2.5 0 1 0 12 6.5a2.5 2.5 0 0 0 0 5Z"
              />
            </svg>
          </span>
          <div class="welcome-location__body">
            <div class="welcome-location__label">Jawoord</div>
            <div class="welcome-location__value">Gemeentehuis Lommel</div>
          </div>
          <span class="welcome-location__chevron" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="16" height="16" focusable="false" role="presentation">
              <path
                d="M9 6l6 6-6 6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </span>
        </a>

        <a
          class="welcome-location welcome-location--link"
          href="https://www.google.com/maps/search/?api=1&query=Grote%20Baan%209%2C%203530%20Houthalen-Helchteren"
          target="_blank"
          rel="noopener noreferrer"
        >
          <span class="welcome-pin" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="14" height="14" focusable="false" role="presentation">
              <path
                fill="currentColor"
                d="M12 2c3.87 0 7 3.13 7 7 0 5.25-7 13-7 13S5 14.25 5 9c0-3.87 3.13-7 7-7Zm0 9.5A2.5 2.5 0 1 0 12 6.5a2.5 2.5 0 0 0 0 5Z"
              />
            </svg>
          </span>
          <div class="welcome-location__body">
            <div class="welcome-location__label">Feestlocatie</div>
            <div class="welcome-location__value">De Barrier, Houthalen-Helchteren</div>
          </div>
          <span class="welcome-location__chevron" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="16" height="16" focusable="false" role="presentation">
              <path
                d="M9 6l6 6-6 6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </span>
        </a>
      </div>


    </div>
  </div>

  <div class="bottom-actions" *ngIf="!config?.isClosed">
    <div class="bottom-actions__inner">
      <button class="button cta-button" (click)="continue()" [disabled]="config?.isClosed">
        <span class="cta-button__text">Bevestig hier je aanwezigheid</span>
        <span class="cta-button__arrow" aria-hidden="true">→</span>
      </button>
    </div>
  </div>

  <div class="bottom-actions" *ngIf="config?.isClosed">
     <div class="bottom-actions__inner">
        <div class="notice-card" style="background: rgba(255,255,255,0.8); border-radius: 12px; padding: 16px;">
            <p class="error" style="margin-bottom: 8px;">De uiterste datum is verstreken.</p>
            <p class="muted" style="font-size: 14px; line-height: 1.4;">
                Neem direct contact met ons op via de contactgegevens op de uitnodiging.<br>
            </p>
        </div>
     </div>
  </div>

  <div *ngIf="showDoneModal" class="done-modal" (click)="closeDoneModal()" role="dialog" aria-modal="true" aria-labelledby="done-title">
    <div class="done-modal__content" (click)="$event.stopPropagation()">
      <button
        type="button"
        class="done-modal__x"
        (click)="closeDoneModal()"
        aria-label="Sluiten"
      >
        ×
      </button>

      <h2 id="done-title" class="done-modal__title">Bedankt!</h2>
      <p class="done-modal__message">
        Bedankt! We hebben het genoteerd. Laat het gerust weten als je nog vragen hebt:
      </p>
      <div class="done-modal__contacts">
        <div class="done-modal__contact">
          <strong>Warre: </strong> <a href="tel:+32476759879" class="done-modal__phone">+32 476 75 98 79</a>
        </div>
        <div class="done-modal__contact">
          <strong>Chelsea: </strong> <a href="tel:+32483705946" class="done-modal__phone">+32 483 70 59 46</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Unlock Modal (Code Input) -->
  <div *ngIf="showUnlockModal" class="unlock-modal" role="dialog" aria-modal="true">
    <div class="unlock-modal__backdrop" (click)="closeUnlockModal()"></div>
    
    <div class="unlock-modal__content locked-container">
      <button class="unlock-modal__close" (click)="closeUnlockModal()">×</button>
      
      <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>
      
      <div class="otp-input-group" [formGroup]="form">
        <input
          #codeInput
          type="tel"
          autocomplete="one-time-code"
          inputmode="numeric"
          pattern="[0-9]*"
          class="otp-hidden-input"
          formControlName="code"
          [attr.maxlength]="6"
          (input)="onCodeValueChange($any($event.target).value)"
          (blur)="isFocused = false"
        />
        
        <div
          class="otp-digit"
          *ngFor="let digit of displayDigits; let i = index"
          [class.filled]="digit"
          [class.focused]="isFocused && displayDigits[i] === '' && (i === 0 || displayDigits[i - 1] !== '')"
          [class.valid]="validationState === 'valid'"
          [class.invalid]="validationState === 'invalid'"
          (click)="focusInput()"
        >
          {{ digit }}
        </div>
      </div>

      <div class="error-wrapper">
        <div *ngIf="unlockError" class="error-message">{{ unlockError }}</div>
      </div>

      <div class="submit-button-spacer" style="height: 24px;"></div>
    </div>
  </div>
</div>
